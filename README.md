# ğŸŒ± EcoCity Backend API Une API backend moderne et complÃ¨te construite avec Node.js, Express, Sequelize et MySQL, incluant une documentation Swagger interactive et un dashboard de monitoring en temps rÃ©el. ## ğŸ¯ AperÃ§u EcoCity Backend est une solution complÃ¨te pour la gestion d'utilisateurs avec authentification JWT, monitoring avancÃ© et documentation API interactive. Parfait pour des applications web modernes nÃ©cessitant une base solide et sÃ©curisÃ©e. ### âœ¨ FonctionnalitÃ©s principales - ğŸ” **Authentification JWT sÃ©curisÃ©e** - Inscription, connexion, gestion des profils - ğŸ“š **Documentation Swagger UI** - Interface interactive pour tester les APIs - ğŸ“Š **Dashboard de monitoring temps rÃ©el** - MÃ©triques serveur avec WebSocket - ğŸ›¡ï¸ **SÃ©curitÃ© renforcÃ©e** - Rate limiting, Helmet, CORS, validation des donnÃ©es - ğŸ—„ï¸ **Base de donnÃ©es MySQL** - ORM Sequelize avec migrations et seeders - ğŸŒ **AccÃ¨s rÃ©seau** - Configuration pour utilisation multi-PC - âš¡ **Performance optimisÃ©e** - Monitoring des temps de rÃ©ponse et ressources ## ğŸš€ Installation rapide ### PrÃ©requis - Node.js 18+ - MySQL 8.0+ - npm ou yarn ### 1. Cloner le projet ```bash git clone https://github.com/devhunt2025/project_repo.git cd project_repo ``` ### 2. Installer les dÃ©pendances ```bash npm install ``` ### 3. Configuration de l'environnement CrÃ©ez un fichier `.env` Ã  la racine : ```env # ğŸ—„ï¸ Configuration Base de donnÃ©es DB_HOST=localhost DB_PORT=3306 DB_NAME=ecocity DB_USER=root DB_PASSWORD= # ğŸš€ Configuration Serveur PORT=3000 NODE_ENV=development # ğŸ” SÃ©curitÃ© JWT (IMPORTANT: Changez cette clÃ© en production) JWT_SECRET=votre_cle_secrete_super_forte_ici_2024 # ğŸ“š Configuration Swagger SWAGGER_HOST=localhost:3000 ``` ### 4. PrÃ©parer la base de donnÃ©es ```sql -- CrÃ©er la base de donnÃ©es CREATE DATABASE ecocity CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ``` ```bash # ExÃ©cuter les migrations npx sequelize-cli db:migrate # (Optionnel) Ajouter des donnÃ©es de test npx sequelize-cli db:seed:all ``` ### 5. DÃ©marrer le serveur ```bash npm run dev ``` ğŸ‰ **Votre serveur est maintenant en ligne !** ## ğŸŒ AccÃ¨s aux services | Service | URL | Description | |---------|-----|-------------| | ğŸ  **API principale** | http://localhost:3000 | Point d'entrÃ©e principal | | ğŸ“š **Documentation Swagger** | http://localhost:3000/api-docs | Interface de test des APIs | | ğŸ“Š **Dashboard monitoring** | http://localhost:3000/dashboard | MÃ©triques temps rÃ©el | | ğŸ’š **Health check** | http://localhost:3000/health | Ã‰tat du serveur | ## ğŸ”§ Documentation API ### ğŸ” Authentification (`/api/auth`) | MÃ©thode | Endpoint | Description | Auth requise | |---------|----------|-------------|--------------| | POST | `/api/auth/inscription` | CrÃ©er un compte utilisateur | âŒ | | POST | `/api/auth/login` | Se connecter | âŒ | | GET | `/api/auth/profile` | RÃ©cupÃ©rer son profil | âœ… | | POST | `/api/auth/logout` | Se dÃ©connecter | âŒ | ### ğŸ“ Exemples d'utilisation #### Inscription d'un utilisateur ```bash curl -X POST http://localhost:3000/api/auth/inscription \\ -H "Content-Type: application/json" \\ -d '{ "email": "john.doe@example.com", "password": "motdepasse123", "nom": "Doe", "prenom": "John", "role": "user", "adresse": "123 Rue de la Paix", "telephone": "+33123456789" }' ``` #### Connexion ```bash curl -X POST http://localhost:3000/api/auth/login \\ -H "Content-Type: application/json" \\ -d '{ "email": "john.doe@example.com", "password": "motdepasse123" }' ``` #### AccÃ¨s au profil (avec token) ```bash curl -X GET http://localhost:3000/api/auth/profile \\ -H "Authorization: Bearer VOTRE_TOKEN_JWT" ``` ### ğŸ‘¥ Comptes de test (aprÃ¨s seeders) | Email | Mot de passe | RÃ´le | |-------|--------------|------| | admin@ecocity.com | admin123 | admin | | user@ecocity.com | user123 | user | ## ğŸ“Š Dashboard de monitoring Le dashboard temps rÃ©el affiche : ### ğŸ“ˆ MÃ©triques des requÃªtes - Nombre total de requÃªtes - Taux de succÃ¨s/erreur - RÃ©partition par mÃ©thode HTTP - Temps de rÃ©ponse moyen avec graphique ### ğŸ–¥ï¸ MÃ©triques systÃ¨me - Utilisation mÃ©moire (heap/total/systÃ¨me) - Temps de fonctionnement (uptime) - Informations plateforme - Charge CPU ### ğŸ”— Connexions - Connexions WebSocket actives - Historique des connexions ## ğŸ›¡ï¸ SÃ©curitÃ© implÃ©mentÃ©e ### ğŸ” Authentification - **Hachage bcrypt** des mots de passe (salt rounds: 10) - **Tokens JWT** avec expiration configurable - **Middleware d'authentification** pour les routes protÃ©gÃ©es ### ğŸ›¡ï¸ Protection - **Rate limiting** : 100 requÃªtes/15min par IP - **Headers de sÃ©curitÃ©** avec Helmet - **CORS** configurÃ© pour les domaines autorisÃ©s - **Validation stricte** des donnÃ©es d'entrÃ©e - **Gestion d'erreurs** sÃ©curisÃ©e ### ğŸ” Monitoring - **Logging** des requÃªtes et erreurs - **MÃ©triques temps rÃ©el** via WebSocket - **Health checks** automatiques ## ğŸ—‚ï¸ Architecture du projet ``` project_repo/ â”œâ”€â”€ ğŸ“ config/ â”‚ â”œâ”€â”€ config.json # Configuration Sequelize â”‚ â””â”€â”€ database.js # Connexion base de donnÃ©es â”œâ”€â”€ ğŸ“ controllers/ â”‚ â””â”€â”€ authController.js # Logique d'authentification â”œâ”€â”€ ğŸ“ middleware/ â”‚ â””â”€â”€ monitoring.js # SystÃ¨me de monitoring â”œâ”€â”€ ğŸ“ migrations/ â”‚ â””â”€â”€ 20241217000001-create-user.js # Structure base de donnÃ©es â”œâ”€â”€ ğŸ“ models/ â”‚ â”œâ”€â”€ index.js # Configuration ORM â”‚ â””â”€â”€ user.js # ModÃ¨le utilisateur â”œâ”€â”€ ğŸ“ public/ â”‚ â””â”€â”€ ğŸ“ dashboard/ â”‚ â””â”€â”€ index.html # Interface monitoring â”œâ”€â”€ ğŸ“ routes/ â”‚ â””â”€â”€ auth.js # Routes d'authentification â”œâ”€â”€ ğŸ“ seeders/ â”‚ â””â”€â”€ 20241217000001-demo-user.js # DonnÃ©es de test â”œâ”€â”€ ğŸ“ uploads/ # Stockage fichiers â”œâ”€â”€ .env # Variables d'environnement â”œâ”€â”€ .gitignore # Fichiers ignorÃ©s par Git â”œâ”€â”€ index.js # Point d'entrÃ©e application â”œâ”€â”€ package.json # DÃ©pendances et scripts â””â”€â”€ README.md # Cette documentation ``` ## ğŸ”„ Scripts disponibles ```bash # ğŸš€ DÃ©veloppement npm run dev # DÃ©marrage avec nodemon (rechargement auto) npm start # DÃ©marrage en production # ğŸ—„ï¸ Base de donnÃ©es npx sequelize-cli db:migrate # ExÃ©cuter les migrations npx sequelize-cli db:migrate:undo # Annuler la derniÃ¨re migration npx sequelize-cli db:seed:all # Charger les donnÃ©es de test npx sequelize-cli db:seed:undo:all # Supprimer les donnÃ©es de test # ğŸ§¹ Maintenance npm cache clean --force # Nettoyer le cache npm ``` ## ğŸŒ Configuration rÃ©seau (accÃ¨s multi-PC) ### Pour permettre l'accÃ¨s depuis d'autres ordinateurs : #### 1. Trouver votre adresse IP locale ```bash # Windows ipconfig | findstr IPv4 # Linux/macOS ifconfig | grep inet # ou ip addr show ``` #### 2. Mettre Ã  jour la configuration Dans votre fichier `.env` : ```env # Remplacez par votre IP locale SWAGGER_HOST=192.168.1.100:3000 ``` #### 3. RedÃ©marrer le serveur ```bash npm run dev ``` #### 4. AccÃ¨s depuis d'autres PC - **API** : `http://192.168.1.100:3000` - **Swagger** : `http://192.168.1.100:3000/api-docs` - **Dashboard** : `http://192.168.1.100:3000/dashboard` ### ğŸ”¥ Configuration pare-feu ```bash # Windows (PowerShell en admin) New-NetFirewallRule -DisplayName "EcoCity API" -Direction Inbound -Port 3000 -Protocol TCP -Action Allow # Linux (Ubuntu/Debian) sudo ufw allow 3000 # macOS # Aller dans PrÃ©fÃ©rences SystÃ¨me > SÃ©curitÃ© > Pare-feu > Options > Ajouter le port 3000 ``` ## ğŸ› Guide de dÃ©pannage ### âŒ Erreur de connexion base de donnÃ©es ```bash # VÃ©rifier le statut MySQL # Windows net start mysql # Linux sudo systemctl status mysql sudo systemctl start mysql # macOS brew services start mysql ``` **Solutions :** - âœ… VÃ©rifier que MySQL est dÃ©marrÃ© - âœ… ContrÃ´ler les paramÃ¨tres dans `.env` - âœ… S'assurer que la base `ecocity` existe - âœ… VÃ©rifier les permissions utilisateur MySQL ### âŒ Port dÃ©jÃ  utilisÃ© ```bash # Identifier le processus utilisant le port 3000 # Windows netstat -ano | findstr :3000 taskkill /PID <PID> /F # Linux/macOS lsof -i :3000 kill -9 <PID> ``` ### âŒ ProblÃ¨mes de dÃ©pendances ```bash # RÃ©installation complÃ¨te rm -rf node_modules package-lock.json npm cache clean --force npm install ``` ### âŒ Erreurs de migration ```bash # RÃ©initialiser les migrations npx sequelize-cli db:migrate:undo:all npx sequelize-cli db:migrate ``` ### âŒ Token JWT invalide - âœ… VÃ©rifier que `JWT_SECRET` est dÃ©fini dans `.env` - âœ… S'assurer que le token n'a pas expirÃ© - âœ… ContrÃ´ler le format : `Authorization: Bearer <token>` ## ğŸ“ˆ Monitoring et logs ### ğŸ“Š MÃ©triques disponibles - **RequÃªtes** : Total, succÃ¨s, erreurs, temps de rÃ©ponse - **MÃ©moire** : Heap utilisÃ©/total, mÃ©moire systÃ¨me - **SystÃ¨me** : Uptime, plateforme, architecture - **Connexions** : WebSocket actives/totales ### ğŸ“ Logs Les logs sont affichÃ©s dans la console avec les niveaux : - âœ… **INFO** : DÃ©marrage, connexions - âš ï¸ **WARN** : Tentatives de connexion Ã©chouÃ©es - âŒ **ERROR** : Erreurs serveur, base de donnÃ©es ## ğŸš€ DÃ©ploiement en production ### Variables d'environnement production ```env NODE_ENV=production JWT_SECRET=cle_super_secrete_production_2024 DB_PASSWORD=mot_de_passe_fort ``` ### Recommandations sÃ©curitÃ© - ğŸ” Utiliser des mots de passe forts - ğŸ”„ Rotation rÃ©guliÃ¨re des secrets JWT - ğŸ›¡ï¸ Configurer un reverse proxy (nginx) - ğŸ“Š Monitoring avec des outils externes - ğŸ”’ Certificats SSL/TLS ## ğŸ¤ Contribution Les contributions sont les bienvenues ! ### Comment contribuer : 1. **Fork** le projet 2. **CrÃ©er** une branche feature (`git checkout -b feature/AmazingFeature`) 3. **Commit** vos changements (`git commit -m 'Add AmazingFeature'`) 4. **Push** vers la branche (`git push origin feature/AmazingFeature`) 5. **Ouvrir** une Pull Request ### ğŸ“‹ Standards de code - Utiliser ESLint pour la cohÃ©rence - Commenter les fonctions complexes - Tester les nouvelles fonctionnalitÃ©s - Suivre les conventions de nommage ## ğŸ“„ Licence Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de dÃ©tails. ## ğŸ“ Support - ğŸ› **Issues** : [GitHub Issues](https://github.com/devhunt2025/project_repo/issues) - ğŸ“§ **Email** : support@ecocity.com - ğŸ’¬ **Discord** : [Serveur EcoCity](https://discord.gg/ecocity) ## ğŸ™ Remerciements - [Express.js](https://expressjs.com/) - Framework web - [Sequelize](https://sequelize.org/) - ORM pour Node.js - [Swagger UI](https://swagger.io/tools/swagger-ui/) - Documentation API - [Socket.IO](https://socket.io/) - Communication temps rÃ©el - [Chart.js](https://www.chartjs.org/) - Graphiques dashboard --- <div align="center"> **ğŸŒ± DÃ©veloppÃ© avec â¤ï¸ pour un avenir plus vert** [![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/) [![Express](https://img.shields.io/badge/Express-4.18+-blue.svg)](https://expressjs.com/) [![MySQL](https://img.shields.io/badge/MySQL-8.0+-orange.svg)](https://mysql.com/) [![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE) [â­ Star ce projet](https://github.com/devhunt2025/project_repo) â€¢ [ğŸ› Reporter un bug](https://github.com/devhunt2025/project_repo/issues) â€¢ [ğŸ’¡ Demander une fonctionnalitÃ©](https://github.com/devhunt2025/project_repo/issues) </div> ``` Ce README amÃ©liorÃ© inclut : âœ… **Structure professionnelle** avec emojis et sections claires âœ… **Instructions dÃ©taillÃ©es** d'installation et configuration âœ… **Exemples concrets** d'utilisation des APIs âœ… **Guide de dÃ©pannage** complet âœ… **Documentation rÃ©seau** pour l'accÃ¨s multi-PC âœ… **Informations de sÃ©curitÃ©** et bonnes pratiques âœ… **Architecture du projet** bien documentÃ©e âœ… **Scripts et commandes** utiles âœ… **Section contribution** pour les dÃ©veloppeurs âœ… **Badges et liens** professionnels âœ… **Support et contact** clairement indiquÃ©s